{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"../Css/MyCrops.css\";import Navbar from\"../components/Navbar\";import Sidebar from\"../components/Sidebar\";import Footer from\"../components/Footer\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function MyCrops(){const[crops,setCrops]=useState([]);/* =========================\r\n     LOAD USER + CROPS (SESSION)\r\n  ========================= */useEffect(()=>{fetch(\"/api/user/get-profile\",{credentials:\"include\"}).then(res=>res.json()).then(data=>{if(!data||data.status===\"error\"){window.location.href=\"/login\";return;}return fetch(\"/api/crop/farmer?farmerId=\".concat(data.farmerId),{credentials:\"include\"});}).then(res=>res===null||res===void 0?void 0:res.json()).then(list=>setCrops(list||[])).catch(()=>console.error(\"My crops load error\"));},[]);/* =========================\r\n     IMAGE FIX\r\n  ========================= */const getImage=images=>{if(!images){return process.env.PUBLIC_URL+\"/Images/noimg.png\";}const first=images.split(\",\")[0].trim();return\"http://localhost:9090/backend/uploads/\".concat(first);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"layout\",children:[/*#__PURE__*/_jsx(Sidebar,{cartCount:0}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-area\",children:[/*#__PURE__*/_jsxs(\"main\",{className:\"page-crops\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83C\\uDF31 My Crops\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"Manage and monitor your crop listings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"crops-list\",children:crops.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No crops added yet.\"}):crops.map(crop=>/*#__PURE__*/_jsxs(\"div\",{className:\"crop-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:getImage(crop.images),className:\"crop-img\",alt:\"crop\",onError:e=>{e.target.onerror=null;e.target.src=process.env.PUBLIC_URL+\"/Images/noimg.png\";}}),/*#__PURE__*/_jsx(\"h3\",{children:crop.cropName}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Category: \",crop.category]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Quantity: \",crop.quantity,\" Kg\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: \\u20B9\",crop.price]})]},crop.cropId))})]}),/*#__PURE__*/_jsx(Footer,{})]})]})]});}export default MyCrops;","map":{"version":3,"names":["React","useEffect","useState","Navbar","Sidebar","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MyCrops","crops","setCrops","fetch","credentials","then","res","json","data","status","window","location","href","concat","farmerId","list","catch","console","error","getImage","images","process","env","PUBLIC_URL","first","split","trim","children","className","cartCount","length","map","crop","src","alt","onError","e","target","onerror","cropName","category","quantity","price","cropId"],"sources":["D:/AgroLink/frontend/src/components/MyCrops.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"../Css/MyCrops.css\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport Sidebar from \"../components/Sidebar\";\r\nimport Footer from \"../components/Footer\";\r\n\r\nfunction MyCrops() {\r\n  const [crops, setCrops] = useState([]);\r\n\r\n  /* =========================\r\n     LOAD USER + CROPS (SESSION)\r\n  ========================= */\r\n  useEffect(() => {\r\n    fetch(\"/api/user/get-profile\", {\r\n      credentials: \"include\",\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (!data || data.status === \"error\") {\r\n          window.location.href = \"/login\";\r\n          return;\r\n        }\r\n\r\n        return fetch(\r\n          `/api/crop/farmer?farmerId=${data.farmerId}`,\r\n          { credentials: \"include\" }\r\n        );\r\n      })\r\n      .then((res) => res?.json())\r\n      .then((list) => setCrops(list || []))\r\n      .catch(() => console.error(\"My crops load error\"));\r\n  }, []);\r\n\r\n  /* =========================\r\n     IMAGE FIX\r\n  ========================= */\r\n  const getImage = (images) => {\r\n    if (!images) {\r\n      return process.env.PUBLIC_URL + \"/Images/noimg.png\";\r\n    }\r\n\r\n    const first = images.split(\",\")[0].trim();\r\n    return `http://localhost:9090/backend/uploads/${first}`;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n\r\n      <div className=\"layout\">\r\n        <Sidebar cartCount={0} />\r\n\r\n        <div className=\"content-area\">\r\n          <main className=\"page-crops\">\r\n            <h2>ðŸŒ± My Crops</h2>\r\n            <p className=\"subtitle\">Manage and monitor your crop listings</p>\r\n\r\n            <div className=\"crops-list\">\r\n              {crops.length === 0 ? (\r\n                <p>No crops added yet.</p>\r\n              ) : (\r\n                crops.map((crop) => (\r\n                  <div key={crop.cropId} className=\"crop-card\">\r\n                    <img\r\n                      src={getImage(crop.images)}\r\n                      className=\"crop-img\"\r\n                      alt=\"crop\"\r\n                      onError={(e) => {\r\n                        e.target.onerror = null;\r\n                        e.target.src =\r\n                          process.env.PUBLIC_URL + \"/Images/noimg.png\";\r\n                      }}\r\n                    />\r\n\r\n                    <h3>{crop.cropName}</h3>\r\n                    <p>Category: {crop.category}</p>\r\n                    <p>Quantity: {crop.quantity} Kg</p>\r\n                    <p>Price: â‚¹{crop.price}</p>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </main>\r\n\r\n          <Footer />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MyCrops;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
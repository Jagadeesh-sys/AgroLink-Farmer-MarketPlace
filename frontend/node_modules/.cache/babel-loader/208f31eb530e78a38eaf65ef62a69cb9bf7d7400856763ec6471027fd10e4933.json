{"ast":null,"code":"import _objectSpread from\"D:/AgroLink/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import Navbar from\"../components/Navbar\";import Sidebar from\"../components/Sidebar\";import Footer from\"../components/Footer\";import\"../Css/MyOrders.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function MyOrders(){const navigate=useNavigate();const[orders,setOrders]=useState(JSON.parse(localStorage.getItem(\"orders\"))||[]);/* =========================\r\n     IMAGE HANDLER\r\n  ========================= */const getImage=imgStr=>{if(!imgStr)return\"/Images/noimg.png\";if(imgStr.startsWith(\"http\")||imgStr.startsWith(\"data:\"))return imgStr;const first=imgStr.split(\",\")[0].trim();return\"http://localhost:9090/backend/uploads/\".concat(first);};/* =========================\r\n     CANCEL ORDER\r\n  ========================= */const cancelOrder=orderId=>{const confirmCancel=window.confirm(\"Are you sure you want to cancel this order?\");if(!confirmCancel)return;const updatedOrders=orders.map(order=>order.orderId===orderId?_objectSpread(_objectSpread({},order),{},{status:\"Cancelled\"}):order);setOrders(updatedOrders);localStorage.setItem(\"orders\",JSON.stringify(updatedOrders));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"layout\",children:[/*#__PURE__*/_jsx(Sidebar,{cartCount:0}),/*#__PURE__*/_jsxs(\"div\",{className:\"orders-content\",children:[/*#__PURE__*/_jsxs(\"main\",{className:\"orders-main\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"orders-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Orders\"}),/*#__PURE__*/_jsx(\"p\",{children:\"View, track or cancel your orders\"})]}),orders.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"orders-empty\",children:\"You have not placed any orders yet.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"orders-list\",children:orders.map(order=>{var _order$payment;return/*#__PURE__*/_jsxs(\"div\",{className:\"order-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order-top\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Order ID:\"}),\" \",order.orderId]}),/*#__PURE__*/_jsx(\"span\",{className:\"order-status \".concat(order.status===\"Cancelled\"?\"status-cancelled\":\"\"),children:order.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Date:\"}),\" \",new Date(order.date).toLocaleString()]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Payment:\"}),\" \",((_order$payment=order.payment)===null||_order$payment===void 0?void 0:_order$payment.toUpperCase())||\"COD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-items\",children:[order.items.slice(0,3).map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"order-item-row\",children:[/*#__PURE__*/_jsx(\"img\",{src:getImage(item.images),alt:item.cropName,className:\"order-item-img\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-item-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"order-item-name\",children:item.cropName}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-item-meta\",children:[item.qty,\" \\xD7 \\u20B9\",item.price]})]})]},item.cropId)),order.items.length>3&&/*#__PURE__*/_jsxs(\"div\",{className:\"more-items\",children:[\"+\",order.items.length-3,\" more items\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order-total\",children:[\"\\u20B9\",order.total]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"track-btn\",onClick:()=>navigate(\"/orders/\".concat(order.orderId)),children:\"Track Order\"}),order.status!==\"Cancelled\"&&/*#__PURE__*/_jsx(\"button\",{className:\"cancel-btn\",onClick:()=>cancelOrder(order.orderId),children:\"Cancel\"})]})]})]},order.orderId);})})]}),/*#__PURE__*/_jsx(Footer,{})]})]})]});}export default MyOrders;","map":{"version":3,"names":["React","useState","useNavigate","Navbar","Sidebar","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MyOrders","navigate","orders","setOrders","JSON","parse","localStorage","getItem","getImage","imgStr","startsWith","first","split","trim","concat","cancelOrder","orderId","confirmCancel","window","confirm","updatedOrders","map","order","_objectSpread","status","setItem","stringify","children","className","cartCount","length","_order$payment","Date","date","toLocaleString","payment","toUpperCase","items","slice","item","src","images","alt","cropName","qty","price","cropId","total","onClick"],"sources":["D:/AgroLink/frontend/src/pages/MyOrders.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport Sidebar from \"../components/Sidebar\";\r\nimport Footer from \"../components/Footer\";\r\nimport \"../Css/MyOrders.css\";\r\n\r\nfunction MyOrders() {\r\n  const navigate = useNavigate();\r\n\r\n  const [orders, setOrders] = useState(\r\n    JSON.parse(localStorage.getItem(\"orders\")) || []\r\n  );\r\n\r\n  /* =========================\r\n     IMAGE HANDLER\r\n  ========================= */\r\n  const getImage = (imgStr) => {\r\n    if (!imgStr) return \"/Images/noimg.png\";\r\n    if (imgStr.startsWith(\"http\") || imgStr.startsWith(\"data:\")) return imgStr;\r\n    const first = imgStr.split(\",\")[0].trim();\r\n    return `http://localhost:9090/backend/uploads/${first}`;\r\n  };\r\n\r\n  /* =========================\r\n     CANCEL ORDER\r\n  ========================= */\r\n  const cancelOrder = (orderId) => {\r\n    const confirmCancel = window.confirm(\r\n      \"Are you sure you want to cancel this order?\"\r\n    );\r\n    if (!confirmCancel) return;\r\n\r\n    const updatedOrders = orders.map((order) =>\r\n      order.orderId === orderId\r\n        ? { ...order, status: \"Cancelled\" }\r\n        : order\r\n    );\r\n\r\n    setOrders(updatedOrders);\r\n    localStorage.setItem(\"orders\", JSON.stringify(updatedOrders));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n\r\n      <div className=\"layout\">\r\n        <Sidebar cartCount={0} />\r\n\r\n        <div className=\"orders-content\">\r\n          <main className=\"orders-main\">\r\n            <header className=\"orders-header\">\r\n              <h2>My Orders</h2>\r\n              <p>View, track or cancel your orders</p>\r\n            </header>\r\n\r\n            {orders.length === 0 ? (\r\n              <div className=\"orders-empty\">\r\n                You have not placed any orders yet.\r\n              </div>\r\n            ) : (\r\n              <div className=\"orders-list\">\r\n                {orders.map((order) => (\r\n                  <div className=\"order-card\" key={order.orderId}>\r\n                    {/* TOP */}\r\n                    <div className=\"order-top\">\r\n                      <div>\r\n                        <b>Order ID:</b> {order.orderId}\r\n                      </div>\r\n\r\n                      <span\r\n                        className={`order-status ${\r\n                          order.status === \"Cancelled\"\r\n                            ? \"status-cancelled\"\r\n                            : \"\"\r\n                        }`}\r\n                      >\r\n                        {order.status}\r\n                      </span>\r\n                    </div>\r\n\r\n                    {/* META */}\r\n                    <div className=\"order-meta\">\r\n                      <span>\r\n                        <b>Date:</b>{\" \"}\r\n                        {new Date(order.date).toLocaleString()}\r\n                      </span>\r\n                      <span>\r\n                        <b>Payment:</b>{\" \"}\r\n                        {order.payment?.toUpperCase() || \"COD\"}\r\n                      </span>\r\n                    </div>\r\n\r\n                    {/* ITEMS */}\r\n                    <div className=\"order-items\">\r\n                      {order.items.slice(0, 3).map((item) => (\r\n                        <div className=\"order-item-row\" key={item.cropId}>\r\n                          <img\r\n                            src={getImage(item.images)}\r\n                            alt={item.cropName}\r\n                            className=\"order-item-img\"\r\n                          />\r\n\r\n                          <div className=\"order-item-info\">\r\n                            <div className=\"order-item-name\">\r\n                              {item.cropName}\r\n                            </div>\r\n                            <div className=\"order-item-meta\">\r\n                              {item.qty} × ₹{item.price}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n\r\n                      {order.items.length > 3 && (\r\n                        <div className=\"more-items\">\r\n                          +{order.items.length - 3} more items\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* FOOTER */}\r\n                    <div className=\"order-footer\">\r\n                      <div className=\"order-total\">\r\n                        ₹{order.total}\r\n                      </div>\r\n\r\n                      <div className=\"order-actions\">\r\n                        <button\r\n                          className=\"track-btn\"\r\n                          onClick={() =>\r\n                            navigate(`/orders/${order.orderId}`)\r\n                          }\r\n                        >\r\n                          Track Order\r\n                        </button>\r\n\r\n                        {order.status !== \"Cancelled\" && (\r\n                          <button\r\n                            className=\"cancel-btn\"\r\n                            onClick={() => cancelOrder(order.orderId)}\r\n                          >\r\n                            Cancel\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </main>\r\n\r\n          <Footer />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MyOrders;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"const BASE_URL=\"/api/auth\";/* =========================\r\n   LOGIN (FINAL FIX)\r\n========================= */export const loginUser=async(mobile,password)=>{const res=await fetch(\"\".concat(BASE_URL,\"/login\"),{method:\"POST\",credentials:\"include\",// ⭐ REQUIRED FOR SESSION\nheaders:{\"Content-Type\":\"application/x-www-form-urlencoded\"},body:new URLSearchParams({mobile,password})});const text=await res.text();console.log(\"LOGIN RAW RESPONSE:\",text);let data;try{data=JSON.parse(text);}catch(_unused){throw new Error(\"Invalid server response\");}if(!res.ok||data.status===\"error\"){throw new Error(data.message||\"Login failed\");}return data;};/* =========================\r\n   SIGNUP (FIXED)\r\n========================= */export const signupUser=async(fullName,mobile,password)=>{const res=await fetch(\"\".concat(BASE_URL,\"/signup\"),{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"},body:new URLSearchParams({fullName,mobile,password})});const data=await res.json();if(!res.ok||data.status===\"error\"){throw new Error(data.message||\"Signup failed\");}return data;};/* =========================\r\n   LOGOUT (OK)\r\n========================= */export const logoutUser=async()=>{const res=await fetch(\"\".concat(BASE_URL,\"/logout\"),{method:\"POST\",credentials:\"include\"});return res.json();};","map":{"version":3,"names":["BASE_URL","loginUser","mobile","password","res","fetch","concat","method","credentials","headers","body","URLSearchParams","text","console","log","data","JSON","parse","_unused","Error","ok","status","message","signupUser","fullName","json","logoutUser"],"sources":["D:/AgroLink/frontend/src/api/authApi.js"],"sourcesContent":["const BASE_URL = \"/api/auth\";\r\n\r\n/* =========================\r\n   LOGIN (FINAL FIX)\r\n========================= */\r\nexport const loginUser = async (mobile, password) => {\r\n  const res = await fetch(`${BASE_URL}/login`, {\r\n    method: \"POST\",\r\n    credentials: \"include\", // ⭐ REQUIRED FOR SESSION\r\n    headers: {\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n    },\r\n    body: new URLSearchParams({ mobile, password }),\r\n  });\r\n\r\n  const text = await res.text();\r\n  console.log(\"LOGIN RAW RESPONSE:\", text);\r\n\r\n  let data;\r\n  try {\r\n    data = JSON.parse(text);\r\n  } catch {\r\n    throw new Error(\"Invalid server response\");\r\n  }\r\n\r\n  if (!res.ok || data.status === \"error\") {\r\n    throw new Error(data.message || \"Login failed\");\r\n  }\r\n\r\n  return data;\r\n};\r\n\r\n/* =========================\r\n   SIGNUP (FIXED)\r\n========================= */\r\nexport const signupUser = async (fullName, mobile, password) => {\r\n  const res = await fetch(`${BASE_URL}/signup`, {\r\n    method: \"POST\",\r\n    credentials: \"include\",\r\n    headers: {\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n    },\r\n    body: new URLSearchParams({ fullName, mobile, password }),\r\n  });\r\n\r\n  const data = await res.json();\r\n\r\n  if (!res.ok || data.status === \"error\") {\r\n    throw new Error(data.message || \"Signup failed\");\r\n  }\r\n\r\n  return data;\r\n};\r\n\r\n/* =========================\r\n   LOGOUT (OK)\r\n========================= */\r\nexport const logoutUser = async () => {\r\n  const res = await fetch(`${BASE_URL}/logout`, {\r\n    method: \"POST\",\r\n    credentials: \"include\",\r\n  });\r\n\r\n  return res.json();\r\n};\r\n"],"mappings":"AAAA,KAAM,CAAAA,QAAQ,CAAG,WAAW,CAE5B;AACA;AACA,4BACA,MAAO,MAAM,CAAAC,SAAS,CAAG,KAAAA,CAAOC,MAAM,CAAEC,QAAQ,GAAK,CACnD,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIN,QAAQ,WAAU,CAC3CO,MAAM,CAAE,MAAM,CACdC,WAAW,CAAE,SAAS,CAAE;AACxBC,OAAO,CAAE,CACP,cAAc,CAAE,mCAClB,CAAC,CACDC,IAAI,CAAE,GAAI,CAAAC,eAAe,CAAC,CAAET,MAAM,CAAEC,QAAS,CAAC,CAChD,CAAC,CAAC,CAEF,KAAM,CAAAS,IAAI,CAAG,KAAM,CAAAR,GAAG,CAACQ,IAAI,CAAC,CAAC,CAC7BC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAEF,IAAI,CAAC,CAExC,GAAI,CAAAG,IAAI,CACR,GAAI,CACFA,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACL,IAAI,CAAC,CACzB,CAAE,MAAAM,OAAA,CAAM,CACN,KAAM,IAAI,CAAAC,KAAK,CAAC,yBAAyB,CAAC,CAC5C,CAEA,GAAI,CAACf,GAAG,CAACgB,EAAE,EAAIL,IAAI,CAACM,MAAM,GAAK,OAAO,CAAE,CACtC,KAAM,IAAI,CAAAF,KAAK,CAACJ,IAAI,CAACO,OAAO,EAAI,cAAc,CAAC,CACjD,CAEA,MAAO,CAAAP,IAAI,CACb,CAAC,CAED;AACA;AACA,4BACA,MAAO,MAAM,CAAAQ,UAAU,CAAG,KAAAA,CAAOC,QAAQ,CAAEtB,MAAM,CAAEC,QAAQ,GAAK,CAC9D,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIN,QAAQ,YAAW,CAC5CO,MAAM,CAAE,MAAM,CACdC,WAAW,CAAE,SAAS,CACtBC,OAAO,CAAE,CACP,cAAc,CAAE,mCAClB,CAAC,CACDC,IAAI,CAAE,GAAI,CAAAC,eAAe,CAAC,CAAEa,QAAQ,CAAEtB,MAAM,CAAEC,QAAS,CAAC,CAC1D,CAAC,CAAC,CAEF,KAAM,CAAAY,IAAI,CAAG,KAAM,CAAAX,GAAG,CAACqB,IAAI,CAAC,CAAC,CAE7B,GAAI,CAACrB,GAAG,CAACgB,EAAE,EAAIL,IAAI,CAACM,MAAM,GAAK,OAAO,CAAE,CACtC,KAAM,IAAI,CAAAF,KAAK,CAACJ,IAAI,CAACO,OAAO,EAAI,eAAe,CAAC,CAClD,CAEA,MAAO,CAAAP,IAAI,CACb,CAAC,CAED;AACA;AACA,4BACA,MAAO,MAAM,CAAAW,UAAU,CAAG,KAAAA,CAAA,GAAY,CACpC,KAAM,CAAAtB,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIN,QAAQ,YAAW,CAC5CO,MAAM,CAAE,MAAM,CACdC,WAAW,CAAE,SACf,CAAC,CAAC,CAEF,MAAO,CAAAJ,GAAG,CAACqB,IAAI,CAAC,CAAC,CACnB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}